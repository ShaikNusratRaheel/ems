<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - EventManager</title>
    <link rel="stylesheet" href="adminhome.css">
</head>
<body onload="checkLogin()">
    
    <div class="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>EventManager</h1>
                <p>Admin Dashboard</p>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li id="welcomeMsg"></li>
                    <li>
                        <a href="adminhome.html" class="nav-link active">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="addevents.html" class="nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/></svg>
                            Add Events
                        </a>
                    </li>
                    <li>
                        <a href="viewevents.html" class="nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
                            View Events
                        </a>
                    </li>
                    <li>
                        <a href="viewusers.html" class="nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                            View Users
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <a href="../index.html" class="logout-btn" id="logoutBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    Logout
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <h2>Dashboard Overview</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
                    </div>
                    <div class="stat-details">
                        <h3>Total Events</h3>
                        <p>24</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    </div>
                    <div class="stat-details">
                        <h3>Total Users</h3>
                        <p>156</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                    </div>
                    <div class="stat-details">
                        <h3>Registrations</h3>
                        <p>342</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                    </div>
                    <div class="stat-details">
                        <h3>Upcoming Events</h3>
                        <p>8</p>
                    </div>
                </div>
            </div>
            <div class="recent-events">
                <h3>Recent Events</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Event Name</th>
                            <th>Date</th>
                            <th>Location</th>
                            <th>Registrations</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Tech Conference 2024</td>
                            <td>Apr 15, 2024</td>
                            <td>Convention Center</td>
                            <td>150/200</td>
                            <td><span class="status upcoming">Upcoming</span></td>
                        </tr>
                        <tr>
                            <td>Music Festival</td>
                            <td>Mar 28, 2024</td>
                            <td>Central Park</td>
                            <td>500/500</td>
                            <td><span class="status completed">Completed</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>
    <script src="adminhome.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.7.16.min.js"/>
<script src="js/amazon-cognito-identity.min.js"/>
<script src="js/aws-cognito-sdk.min.js"/>
    <script>
        var idToken = null;

        function checkLogin() {
    var url_string = window.location.href;
    console.log("Full URL:", url_string); // Debugging

    var url = new URL(url_string);
    var idToken = url.searchParams.get("id_token");
    console.log("idToken:", idToken);
    // if (!idToken) {
    //     // Check hash if query params are missing
    //     var hashParams = new URLSearchParams(window.location.hash.substring(1));
    //     idToken = hashParams.get("id_token");
    // }

    console.log("Extracted id_token:", idToken); // Debugging

    if (idToken) {
        document.getElementById("welcomeMsg").innerHTML = "signed in";
        localStorage.setItem("id_token", idToken); // Store for future use
        auth();
    } else {
        console.warn("id_token not found in URL!");
    }
}

// document.addEventListener("DOMContentLoaded", checkLogin);


function auth() {
    AWS.config.update({
      region: "us-east-2",
    //  endpoint: 'http://localhost:8000', // If you use dynamoDB installed locally
    //  accessKeyId: "(ACCESS_KEY_ID)",
    //  secretAccessKey: "(SECRET_ACCESS_KEY)"

    });

    AWS.config.credentials = new AWS.CognitoIdentityCredentials({
            IdentityPoolId : 'us-east-1:f28a2426-3e61-4916-8ae3-937d823e4da4',
            Logins : {
              "cognito-idp.(AWS_REGION).amazonaws.com/us-east-1_TzzccFzGZ": idToken
            }
          });
}
    </script>
</body>
</html>